<!doctype html>
<html lang="en" ng-app='geoNodeTekApp' >
	<head>
		<meta charset="utf-8">
		<title>GeoNodeTek</title>

		<link rel="stylesheet" type="text/css" href="/static/css/geonodetek.css" />
	    <script src="/static/lib/js/angular/angular.1.3.15.js"></script>

	    <!-- true lib code -->
		<script src="/static/js/lib.js"></script>
	    <script src="/static/js/gps.js"></script>

	    <script src="/static/js/const.js"></script>
	    
	    <script src="/static/js/controllers/events.js"></script>

		<script src="/static/js/controllers/god.controller.js"></script>
		<script src="/static/js/controllers/gpximport.controller.js"></script>
		<script src="/static/js/controllers/tracklist.controller.js"></script>
	    <script src="/static/js/controllers/activetracklist.controller.js"></script>
	    <script src="/static/js/controllers/map.controller.js"></script>
		<script src="/static/js/controllers/elevationplot.controller.js"></script>
		<script src="/static/js/controllers/map.controller.js"></script>
		
		<script src="/static/js/app.js"></script>
	</head>
	<body ng-controller="GodController">

		<div id="wrapper">

		    <div id="top">
		        <div id="topleft">
		        </div>
		        <div id="topright">
		        	{{ headerText }}
	        	</div>
		    </div>

		    <div id="middle">
		        <div id="middleleft">

			        <div
			        	class='margin-right-10px'
			        	>

		           		<a ng-class='active' href='#' ng-click='launchGpxImport();'>import gpx file</a>
		           		<br/>
		           		<br/>

						<a
							class="active"
							href='#'
							ng-click='gotoOpenTrack();'>
							open track
						</a>
		           		<br/>
						<a  ng-class="(tracks.length == 0) ? 'inactive' : 'active'"
							href='#'
							ng-click='gotoAddTrack();'>
							add track
						</a>
						<br/>	
						<a ng-class="(tracks.length > 1) ? 'active' : 'inactive'"
							href='#' 
							ng-click='gotoRemoveTrack();'>
							remove track
						</a>
						<br/>	           		
		           		
		           		<br/>

		           		<!-- MAP -->
				        <a ng-class="(tracks.length > 0) && (view !== Views.MAP) ? 'active' : 'inactive'" href='#' ng-click='returnToActiveMap();'>map</a>
		           		<br/>
						<a ng-class="(view == Views.MAP) ? 'active' : 'inactive'" href='#' ng-click='cancelMapSelection();'>cancel selection</a>
						<br/>
						<a ng-class="(view == Views.MAP) ? 'active' : 'inactive'" href='#' ng-click='zoomIn();'>zoom in</a>
						<br/>
						<a ng-class="(view == Views.MAP) ? 'active' : 'inactive'" href='#' ng-click='zoomOut();'>zoom out</a>
						<br/>

						<br/>

						<a ng-class="(tracks.length > 0) && (view !== Views.STATS) ? 'active' : 'inactive'" href='#' ng-click='gotoStats()'>stats</a>
						<br/>
						<a ng-class="(tracks.length > 0) && (view !== Views.ELEVATION) ? 'active' : 'inactive'" href='#' ng-click='gotoElevationPlot();'>elevation plot</a>		   
		           	</div>

		        </div>
		        <div id="middleright">

		        	<!-- HOME -->
		        	<div
		        		id='HomeContainer'
		        		class='home'
		        		ng-show='view == Views.HOME'>

		        		<div>
	        			please ensure that
	        			<br/>
	        			you are running the latest version
	        			<br/>
	        			of one of the following supported browsers
	        			<br/>
	        			<br/>
	        			mozilla <a target="blank" href="https://www.mozilla.org/en-US/firefox/new/">firefox</a>
	        			<br/>
	        			google <a target="blank" href="http://www.google.com/chrome/index.html">chrome</a>
		        		<br/>
		        		apple <a target="blank" href="https://www.apple.com/safari/">safari</a>
		        		</div>
		        	</div>

					<!-- IMPORT -->
	            	<div id="ImportContainer"
	            		ng-show='view == Views.IMPORT'
	            		ng-controller='GpxImportController'>

		           		<div>
		           			<input
		           				id="ImportGpxFileInput"
		           				type="file"
		           				multiple
		           				name="file"/>
		           			<br/>
							<button ng-click="importSelectedFiles()">
								import selected file
							</button>
		           		</div>
	           		</div>

		        	<!-- TRACK LIST -->
	          		<div
	          			ng-show='view == Views.MAP_LIST'
	          			ng-controller='TrackListController'
	          			id='TrackListContainer'
	          			>

						<input
							id='TrackListFilterToken'
							placeholder='type here to filter map list and auto-select a map' 
							ng-model='trackListSearchToken' 
							ng-keyup='filterTrackList();' 
							type='text'
							size='32'
							class='dashed-line-text-input'
							ng-class='(trackListSearchToken == "") || (filteredTrackList.length == 0) ? "action-required" : "no-action-required"'
							/>

		            	<div class='track-list'>
							<div ng-repeat="track in filteredTrackList">
								<span 
									ng-class='((selectedTrack !== null) && (selectedTrack.id == track.id)) ? "selected-text" : "";'
									ng-click='selectTrack(track.id);'
									>
									{{ track.timestamp + ' ' + track.name.toLowerCase() }}
								</span>
							</div>
						</div>
					</div>

					<!-- ACTIVE TRACK LIST -->
	            	<div id="ActiveTrackListContainer"
	            		ng-show='(view == Views.ACTIVE_TRACK_LIST)'
	            		ng-controller='ActiveTrackListController'>

	            		<ul>
		            		<li ng-repeat="track in tracks">
		            			<a 
		            				href='#'
		            				ng-click='removeTrack(track.id)'
		            				style='color:{{track.colour}}'
		            				>
		            				{{ track.name }}
	            				</a>
		            		</li>
	            		<ul>
	            	</div>

	           		<!-- MAP -->
					<div id='mapContainer'
						ng-show='view == Views.MAP'
						ng-controller='MapController'
						>

						<canvas id="MapCanvas"
							class="map-canvas">
						</canvas>

						<div id='MapSelectionArea' 
							class='map-selection-area'
							ng-show='showMapSelectionArea'
							>
						</div>

					</div>

					<!-- TRACK STATS -->
					<div id='Stats'
						ng-show='view == Views.STATS'
						class='track-stats'
						>

						<div>

							<div ng-repeat="track in tracks">
								<div style='color:{{track.colour}};'>
									<br/>
									{{ track.name }}
									<br/>
									{{ (track.totalDistanceM / 1000.0).toFixed(2) }} km
									<br/>
									total ascent = {{ track.eleDiff.toFixed(0) }} m ({{ track.minMaxEle.min.toFixed(0) }} - {{ track.minMaxEle.max.toFixed(0) }})
									<br/>
									{{ track.durationString }}
								</div>
							</div>

						</div>

					</div>

					<!-- ELEVATION PLOT -->
					<div id='ElevationContainer'
						ng-show='view == Views.ELEVATION'
						class='elevation-plot-container'
						ng-controller='ElevationPlotController'
						>

						<canvas id="ElevationPlotCanvas"
							class="elevation-canvas">
						</canvas>					
					</div>
	        	</div>
		    </div>

		    <div id="bottom">
		        <div id="bottomleft">	
     	
		        </div>
		        <div id="bottomright">
		        	{{ infoText }}
		        </div>
		    </div>
		</div>

	</body>
</html>