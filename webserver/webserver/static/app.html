<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>geonodetek</title>

		<!-- angular.js -->
	    <script src="/static/lib/js/angular/angular.1.3.15.js"></script> 
	    
	    <!-- custom css -->
		<link rel="stylesheet" type="text/css" href="/static/css/site.css" />

		<!-- angular.js app -->
		<script src="/static/js/controllers.js"></script> 
	</head>
	<body ng-app='geoNodeTekApp' ng-controller="MapCtrl">

		<div style='width: 100%;text-align: center;'>

			<div ng-show='globalState == loadingState || globalState == importingState'>

		 		<div style="width: 100%;">
		           
		            <div class='panel leftPanel'>
		          
						<a ng-class="selectedMap.length == 0 ? 'inactive' : 'active'" href='#' ng-click='loadSelectedMap();'>load map</a>
		           		<br/>

						<input
							id='MapListFilterToken'
							placeholder='type here to filter map list and auto-select a map' 
							ng-model='mapSearchToken' 
							ng-keyup='onMapSearchTokenChanged();' 
							type='text'
							size='32'
							ng-class='(mapSearchToken == "") || (filteredMapList.length == 0) ? "action-required" : "no-action-required"'
							/>
							<!-- size='32' -->

		            	<div id='FilteredMapList'>

							<div ng-repeat="map in filteredMapList">
								<span 
									ng-class='selectedMap[0].id == map.id ? "selected-text" : "";'
									ng-click='mapListItemClicked(map.id);'
									>
									{{map.name.toLowerCase()}}
								</span>
							</div>

						</div>
		            </div>
		        
		            <div class='panel rightPanel'>
		            	<div ng-class='showImportSection ? "active-section" : ""'>
			            	<a ng-class='active' href='#' ng-click='showImportSection = !showImportSection;'>import map data file</a>
			           		<br/>
			           		<div ng-show='showImportSection'>
			           			<input type="file" id="ImportMapFileInput" name="file"/>
			           			<br/>
								<button ng-click="importMapDataFile()">import selected file</button>
			           		</div>
		           		</div>
		           		<a ng-class="mapIsLoadedAndActive == true ? 'active' : 'inactive'" href='#' ng-click='returnToActiveMap();'>return to active map</a>
		           </div>

		        </div>

		        <div style="clear:both"></div>
		    </div>

	    </div>

		<div ng-show='(globalState == viewingState) || (globalState == processingState)' style='width: 100%;margin: 0 auto;text-align: center;'>
			<div>
				{{ selectedMap[0].name }}
			</div>
			
			<canvas 
				id="canvas"
				width='880px'
				height='550px'
				style='display:inline-block;border-style:solid;border-width:1px;border-color:lightgrey;'
				>

			</canvas>

			<div class='info-text'>
				<a ng-click="gotoOptions();" href="#" >options</a>
			</div>

		</div>

	</body>
</html>